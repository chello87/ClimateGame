using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class MoveCamera : MonoBehaviour {
    [SerializeField] private float _moveSpeed = 20f;
    [SerializeField] private float _lerpSpeed = 1f;
    [SerializeField] private float _currentSpeed;
    [SerializeField] private float _targetMoveSpeed;
    [SerializeField] private float _northLimit = 70f;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
    [SerializeField] private float _southLimit = -80f;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
    [SerializeField] private Transform _globe;

    float _rotationY = 0F;
    float _rotationX = 0F;
        
    void Update() {
        var horizontal = Input.GetAxisRaw("Horizontal");
        var vertical = Input.GetAxisRaw("Vertical");        

        Vector3 moveDirection = new Vector3(vertical, horizontal, 0).normalized * Time.deltaTime;

        _targetMoveSpeed = horizontal != 0 || vertical != 0 ? 20f : 0f;
        _currentSpeed = _targetMoveSpeed == 0 ? 0 : _currentSpeed = Mathf.Lerp(_currentSpeed, _targetMoveSpeed, _lerpSpeed);        
        
        _rotationX = transform.eulerAngles.y - moveDirection.y * _currentSpeed;
        _rotationY += moveDirection.x * _currentSpeed;
        _rotationY = Mathf.Clamp(_rotationY, _southLimit, _northLimit);

        transform.localEulerAngles = new Vector3(_rotationY, _rotationX, 0);
    }    
}